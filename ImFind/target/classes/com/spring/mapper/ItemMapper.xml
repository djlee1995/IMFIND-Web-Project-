<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.spring.mapper.MJ.ItemMapper">
<select id="getitem"   resultType="ItemVO">
      
      SELECT * FROM (
          SELECT p.*, ROW_NUMBER() OVER(ORDER BY p.lost_postnum ASC) AS RNUM
          FROM lostpost p
      )
     <!--  WHERE RNUM BETWEEN ${Lost_PostNum} AND 10 
       -->
      <!-- WHERE <![CDATA[rnum >= #{1}]]> and <![CDATA[rnum <= #{12}]]> -->
      
</select>


<select id="getItemservice" resultType="ItemVO"> 
	SELECT * from lostpost  WHERE lost_title like '%' ||  #{keyword} || '%'

<!-- 	<foreach 
	collection="list" item='item' separator="or" close="order by lost_Title"> lost_Title=#{item} </foreach> 
	</select> -->                                                     
	<!-- 
	<foreach item="item" index="index" collection="array"
      open="(" separator="," close=")">
       lost_Title=#{item} -->
 <!--  </foreach> -->
  </select>
  <select id="getdata_info" resultType="ItemVO"> 
	SELECT * from lostpost where lost_postnum = #{lost_PostNum}

  </select>
  
  <!-- 유희 -->
  <select id="getItembyDate" resultType="IndexLostPostDTO">
<!--   	  SELECT * FROM 
  	  	(SELECT * FROM lostpost ORDER BY lost_date asc)
  	  WHERE <![CDATA[ rownum < 15 ]]>   -->
  	  SELECT 
  	  		LOST_POSTNUM, 
  	  		LOST_TITLE, 
  	  		LOST_CONTENT, 
  	  		LOST_UP_FILE, 
  	  		LOST_PAY, 
  	  		LOST_ITEM, 
  	  		LOST_LOC, 
  	  		LOST_DATE, ID,
			(SELECT COUNT(*) AS cnt FROM re_comment WHERE lostpost.lost_postnum = re_comment.lost_postnum) as CommentTotalCnt 
	  FROM lostpost 
	  WHERE <![CDATA[ rownum < 15 ]]>
	  ORDER BY lost_date 
  </select>

  
</mapper>